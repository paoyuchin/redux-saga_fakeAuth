(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){},57:function(e,t,n){e.exports=n(83)},62:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),o=n.n(c),s=(n(62),n(20)),i=n(21),u=n(23),l=n(22),p=n(24),h=n(15),m=n(25),d="LOGIN_REQUEST",g="LOGOUT_REQUEST",f="LOGIN_CANCEL",b="LOGIN_SUCCESS",E="LOGIN_ERROR",O="LOGOUT_SUCCESS";n(37);var w=n(85),j=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.isAuthenticated?r.a.createElement("p",null,"Welcome!",r.a.createElement(w.a,{size:"sm",color:"primary",onClick:function(){e.props.logOut(),e.props.history.push("/")}},"Sign out")):r.a.createElement("p",null,"You are not signed in.")}}]),t}(a.Component),v=Object(m.f)(Object(h.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},function(e){return{logOut:function(){e({type:g})}}})(j)),y=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.ProtectedComponent,a=t.isAuthenticated;return r.a.createElement(m.b,Object.assign({},this.props,{render:function(t){return a?r.a.createElement(n,e.props):r.a.createElement("div",null,r.a.createElement(m.a,{to:{pathname:"/login",state:{from:t.location.pathname}}}))}}))}}]),t}(a.Component),C=Object(h.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},null)(y),x=n(41),A=n(92),S=n(86),L=n(87),k=n(88),I=n(89),N=n(90),P=n(91),G=n(52),M=n.n(G),T=n(51),U=n.n(T),_=n(50),F=n.n(_),R=function(){return r.a.createElement(F.a,null,r.a.createElement(U.a,{variant:"primary",disabled:!0},r.a.createElement(M.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."))},q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).toggle=function(){n.setState(function(e){return{modal:!e.modal}})},n.handleChange=function(e){var t;n.setState((t={},Object(x.a)(t,e.target.id,e.target.value),Object(x.a)(t,"showEmptyInputMessage",!1),t))},n.handleSubmit=function(e){e.preventDefault(),""!==n.state.username&&""!==n.state.password?n.props.logIn(n.state):n.setState(function(e){return{showEmptyInputMessage:!0}})},n.state={modal:!1,username:"",password:"",showEmptyInputMessage:!1},n}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=(this.props.location.state||{from:"/"}).from;return this.props.isAuthenticated&&this.props.history.push("/protected"),r.a.createElement("div",null,r.a.createElement("p",null,"You must log in to view the page at ",t," "),r.a.createElement(w.a,{variant:"info",size:"sm",onClick:this.toggle},"Sign in"),r.a.createElement(A.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},r.a.createElement(S.a,null,"Sign in"),r.a.createElement(L.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a,null,r.a.createElement(I.a,{for:"exampleEmail"},"username"),r.a.createElement(N.a,{onChange:this.handleChange,name:"email",id:"username",placeholder:"username"}),!!this.state.showEmptyInputMessage&&r.a.createElement("p",{className:"text-danger"},"This is a required field")),r.a.createElement(k.a,null,r.a.createElement(I.a,{for:"examplePassword"},"password"),r.a.createElement(N.a,{onChange:this.handleChange,name:"password",id:"password",placeholder:"password"}),!!this.state.showEmptyInputMessage&&r.a.createElement("p",{className:"text-danger"},"This is a required field")),this.props.errorMessage?r.a.createElement("p",{className:"text-danger"},this.props.errorMessage.message):null,"loading"===this.props.loading.status?r.a.createElement(R,null):null,r.a.createElement(P.a,null,r.a.createElement(w.a,{outline:!0,color:"secondary",onClick:function(){e.props.loginCancel(),e.toggle()}},"Cancel"),r.a.createElement(w.a,{color:"primary",onSubmit:this.handleSubmit},"Sign in")))))}}]),t}(a.Component),z=Object(h.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,isLoginFailed:e.auth.isLoginFailed,errorMessage:e.auth.error,loading:e.auth,isLoginCancel:e.auth.isLoginCancel}},function(e){return{logIn:function(t){e(function(e){return{type:d,credential:e}}(t))},loginCancel:function(){e({type:f})}}})(q),W=function(){return r.a.createElement("p",null," Public ")},B=function(){return r.a.createElement("p",null," you are in Protected page")},D=n(17),J=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,null,r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(D.b,{to:"/public"},"Public Page")),r.a.createElement("li",null,r.a.createElement(D.b,{to:"/protected"},"Protected Page"))),r.a.createElement(m.b,{path:"/public",component:W}),r.a.createElement(C,{path:"/protected",ProtectedComponent:B,isAuthenticated:this.props.isAuthenticated}),r.a.createElement(m.b,{path:"/login",render:function(e){return r.a.createElement(z,e)}})))}}]),t}(a.Component),Q=Object(h.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(J);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(18),$=n(55),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1,error:null,isLoginCancel:null,isLoginFailed:null,status:null},t=arguments.length>1?arguments[1]:void 0;switch(console.log("authReducer action:",t),t.type){case d:return console.log('status:"loading"'),{status:"loading"};case b:return{isAuthenticated:!0};case"LOGOUT":return{isAuthenticated:!1};case E:return{isAuthenticated:!1,error:t.error};case"LOGIN_FAILED":return{isAuthenticated:!1,isLoginFailed:!0};case O:return{isAuthenticated:!1};case f:return{isLoginCancel:!0};default:return e}},K=Object(Y.c)({auth:H}),V=(n(81),n(54)),X=n(11),Z=n.n(X),ee=n(13);function te(e){return new Promise(function(t,n){setTimeout(function(){"guest"===e.username&&"guest"===e.password?t(!0):n(new Error("wrong password or username"))},5e3)})}var ne=Z.a.mark(se),ae=Z.a.mark(ie),re=Z.a.mark(ue),ce=Z.a.mark(le),oe=Z.a.mark(pe);function se(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("watch request"),e.next=3,Object(ee.g)(d,ie);case 3:case"end":return e.stop()}},ne)}function ie(e){var t;return Z.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ee.d)(ue,e);case 2:return t=n.sent,n.next=5,Object(ee.f)(f);case 5:return n.next=7,Object(ee.c)(t);case 7:case"end":return n.stop()}},ae)}function ue(e){var t;return Z.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ee.b)(te,e.credential);case 3:return t=n.sent,n.next=6,Object(ee.e)({type:b,response:t});case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(0),console.log("error",n.t0),n.next=13,Object(ee.e)({type:E,error:n.t0});case 13:return n.prev=13,console.log("cancelled"),n.finish(13);case 16:case"end":return n.stop()}},re,null,[[0,8,13,16]])}function le(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(886,"watch logout"),e.next=3,Object(ee.g)(g,pe);case 3:case"end":return e.stop()}},ce)}function pe(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(886,"logoutFlow"),e.next=3,Object(ee.e)({type:O,response:"logout success"});case 3:case"end":return e.stop()}},oe)}var he=Z.a.mark(me);function me(){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.a)([se(),le()]);case 2:case"end":return e.stop()}},he)}var de=Object($.a)(),ge=Object(Y.e)(K,Object(Y.a)(V.a,de));de.run(me),o.a.render(r.a.createElement(h.a,{store:ge},r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,1,2]]]);
//# sourceMappingURL=main.bf44c87b.chunk.js.map