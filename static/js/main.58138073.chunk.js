(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,n){e.exports=n(70)},53:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),i=(n(53),n(20)),s=n(21),l=n(23),u=n(22),p=n(24),h=n(15),d=n(25),m="LOGIN_REQUEST",g="LOGIN_SUCCESS",f="LOGIN_ERROR",b="LOGIN_CANCEL",O="LOGOUT_SUCCESS",E="LOGOUT_REQUEST";var w=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.isAuthenticated?r.a.createElement("p",null,"Welcome!",r.a.createElement("button",{onClick:function(){e.props.logout(),e.props.history.push("/")}},"Sign out")):r.a.createElement("p",null,"You are not logged in.")}}]),t}(a.Component),j=Object(d.f)(Object(h.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},function(e){return{logout:function(){e({type:E})}}})(w)),v=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.ProtectedComponent,a=t.isAuthenticated;return r.a.createElement(d.b,Object.assign({},this.props,{render:function(t){return a?r.a.createElement(n,e.props):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:t.location.pathname}}})}}))}}]),t}(a.Component),C=Object(h.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}},null)(v),y=n(43),A=n(72),L=n(79),x=n(73),k=n(74),S=n(75),P=n(76),G=n(77),I=n(78),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){n.setState(function(e){return{modal:!e.modal}})},n.checkIsValidUser=function(){n.props.isAuthenticated&&(n.toggle(),n.props.history.push("/protected"))},n.handleChange=function(e){n.setState(Object(y.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.login(n.state)},n.state={modal:!1,username:"",password:""},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){(this.props.location.state||{from:{pathname:"/"}}).from;return this.props.isAuthenticated&&this.props.history.push("/protected"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(A.a,{color:"danger",onClick:this.toggle},"login"),r.a.createElement(L.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},r.a.createElement(x.a,null,"sign in"),r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(S.a,null,r.a.createElement(P.a,{for:"exampleEmail"},"username"),r.a.createElement(G.a,{onChange:this.handleChange,name:"email",id:"username",placeholder:"username"})),r.a.createElement(S.a,null,r.a.createElement(P.a,{for:"examplePassword"},"password"),r.a.createElement(G.a,{onChange:this.handleChange,name:"password",id:"password",placeholder:"password"})),this.props.errorMessage?r.a.createElement("p",null,this.props.errorMessage.message):null,r.a.createElement(I.a,null,r.a.createElement(A.a,{color:"primary",onClick:this.props.loginCancel},"cancel"),r.a.createElement(A.a,{color:"secondary",onSubmit:this.handleSubmit},"sign in"))))))}}]),t}(a.Component),U=Object(h.b)(function(e){return console.log("Login state",e),{isAuthenticated:e.auth.isAuthenticated,isLoginFailed:e.auth.isLoginFailed,errorMessage:e.auth.error,isLoginCancel:e.auth.isLoginCancel}},function(e){return{login:function(t){e(function(e){return console.log("LoginRequest in action",e),{type:m,credential:e}}(t))},loginCancel:function(){e((console.log(55,"LoginCancel"),{type:b}))}}})(N),R=function(){return r.a.createElement("h3",null," Public ")},_=function(){return r.a.createElement("h3",null," you are in Protected page")},F=n(17),T=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(F.a,null,r.a.createElement("div",null,r.a.createElement(j,null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(F.b,{to:"/public"},"Public Page")),r.a.createElement("li",null,r.a.createElement(F.b,{to:"/protected"},"Protected Page"))),r.a.createElement(d.b,{path:"/public",component:R}),r.a.createElement(C,{path:"/protected",ProtectedComponent:_,isAuthenticated:this.props.isAuthenticated}),r.a.createElement(d.b,{path:"/login",render:function(e){return r.a.createElement(U,e)}})))}}]),t}(a.Component),M=Object(h.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(T);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=n(18),q=n(47),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAuthenticated:!1,error:null,isLoginCancel:null,isLoginFailed:null},t=arguments.length>1?arguments[1]:void 0;switch(console.log("authReducer action:",t),t.type){case m:return{status:"loading"};case g:return{isAuthenticated:!0};case"LOGOUT":return{isAuthenticated:!1};case f:return{isAuthenticated:!1,error:t.error};case"LOGIN_FAILED":return{isAuthenticated:!1,isLoginFailed:!0};case O:return{isAuthenticated:!1};case b:return{isLoginCancel:!0};default:return e}},D=Object(W.c)({auth:B}),J=(n(68),n(46)),Q=n(11),z=n.n(Q),V=n(13);function Y(e){return console.log("credentai",e),new Promise(function(t,n){setTimeout(function(){console.log(e),"f"===e.username&&"f"===e.password?(console.log("right password and username"),t(!0)):(console.log("wrong"),n(new Error("wrong password or username")))},5e3)})}var $=z.a.mark(ee),H=z.a.mark(te),K=z.a.mark(ne),X=z.a.mark(ae),Z=z.a.mark(re);function ee(){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(1,"watch request"),e.next=3,Object(V.g)(m,re);case 3:case"end":return e.stop()}},$)}function te(){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(886,"watch logout"),e.next=3,Object(V.g)(E,ne);case 3:case"end":return e.stop()}},H)}function ne(){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(886,"logoutFlow"),e.next=3,Object(V.e)({type:O,response:"logout success"});case 3:case"end":return e.stop()}},K)}function ae(e){var t;return z.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(3,"authorized",e.credential),n.prev=1,n.next=4,Object(V.b)(Y,e.credential);case 4:return t=n.sent,n.next=7,Object(V.e)({type:g,response:t});case 7:n.next=14;break;case 9:return n.prev=9,n.t0=n.catch(1),console.log("error",n.t0),n.next=14,Object(V.e)({type:f,error:n.t0});case 14:return n.prev=14,console.log("cancelled"),n.finish(14);case 17:case"end":return n.stop()}},X,null,[[1,9,14,17]])}function re(e){var t;return z.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("login flow",e),n.next=3,Object(V.d)(ae,e);case 3:return t=n.sent,n.next=6,Object(V.f)(b);case 6:return n.next=8,Object(V.c)(t);case 8:case"end":return n.stop()}},Z)}var oe=z.a.mark(ce);function ce(){return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("rootsaga"),e.next=3,Object(V.a)([ee(),te()]);case 3:case"end":return e.stop()}},oe)}var ie=Object(q.a)(),se=Object(W.e)(D,Object(W.a)(J.a,ie));ie.run(ce),c.a.render(r.a.createElement(h.a,{store:se},r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.58138073.chunk.js.map